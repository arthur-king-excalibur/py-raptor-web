<!DOCTYPE html>

{% load static %}
{% load django_bootstrap5 %}

<html lang="en" dir="ltr">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% block page_title %}
    {% endblock %}
    {% block seo_data %}
    <meta name="description" content="{{ site_info_model.meta_description }}">
    <meta name="keywords" content="{{ site_info_model.meta_keywords }}">
    {% endblock %}
    {% block metadata %}
    {% endblock %}
    <meta property="og:type" content="website" />
    <meta property="og:image" content="{% if site_info_model.avatar_image %}{{web_proto}}://{{pub_domain}}{{site_info_model.avatar_image.url}}{% endif %}" />
    <meta property="og:locale" content="en_US" />
    <meta name="theme-color" content="{{ site_info_model.main_color }}">
    <script src="{% static 'javascript/src/dep/htmx.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/raptormc.css' %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% if small_site_info.ico_image %}{{small_site_info.ico_image.url}}{% endif %}">
    {% block custom_css %}
    {% endblock %}
  </head>

  <body id="body" {% if site_info_model.use_main_color %}style="background-color: {{ site_info_model.main_color }}";{% endif %}>

    <div id="backgroundWrapper" 
      style="background-image: url({% if site_info_model.background_image %}{{site_info_model.background_image.url}}{% endif %});
      {% if site_info_model.use_secondary_color %}background-color: {{ site_info_model.secondary_color }};{% endif %}">

      {% comment %} topBox containing Navigation elements {% endcomment %}
      <div id="topBox" style="position: relative; z-index: 1">

        {% include "raptormc/navigation/offcanvasnav.html" %}
        {% include "raptormc/navigation/navwidgets.html" %}
        {% include "raptormc/navigation/lowernav.html" %}

      </div>

      {% comment %} header_box containing Server button and player count elements {% endcomment %}
      {% block header_box %}
      
      {% include "raptormc/components/serverbox.html" %}

      {% endblock %}
      
    </div>

    {% comment %} Main block for page content {% endcomment %}
    <main id="home" class="container-flex m-5 mt-0">
      {% block main_block %}
      {% endblock %}
    </main>

    {% comment %} Notification Toast elements and script {% endcomment %}
    {% include "raptormc/components/toasts.html" %}

    {% comment %} Static website footer {% endcomment %}
    {% include "raptormc/components/footer.html" %}
    
    <script src="{% static 'javascript/src/dep/jquery-3.6.1.min.js' %}"></script>
    <script src="{% static 'javascript/src/dep/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'javascript/src/dep/clipboard.min.js' %}"></script>
    <script src="{% static 'javascript/src/raptormc.js' %}"></script>

    {% comment %} If serverbox did not load, instantiate Bootstrap tooltip object. {% endcomment %}
    {% if total_server_count == 0 %}
    <script>
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    </script>
    {% endif %}

    {% block custom_js %}
    {% endblock %}
    
  </body>

</html>
